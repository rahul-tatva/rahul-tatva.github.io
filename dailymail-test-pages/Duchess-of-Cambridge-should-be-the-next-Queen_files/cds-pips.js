/*! TABOOLA-DEFAULT-VERSION-SNAPSHOT 2021-06-09 */

!function(e){try{var t="https://",n="aHR0cHM6Ly9waXBzLnRhYm9vbGEuY29t";e.TRC.cds={userId:null,getHttpsPrefix:function e(){return t},doNothing:function e(){return!0},safeGetTfaConfig:function t(n,r,s){return e._tfa&&e._tfa.config&&e._tfa.config.safeGet?e._tfa.config.safeGet(n,r,s):null},safeGetRboxConfig:function e(t){var n;return(TRCImpl?TRCImpl.global:{})[t]},prepareGenericRequest:function t(n,r){var s,i=new(e.XDomainRequest||e.XMLHttpRequest);return i.open(n,r),i.onload=this.doNothing,i.onerror=this.doNothing,i.onprogress=this.doNothing,i},getUserId:function t(){var n=e.TFASC&&e.TFASC.tfaUserId&&"function"==typeof e.TFASC.tfaUserId.getUserId?e.TFASC.tfaUserId.getUserId():null,r=e.TRC.pageManager&&"function"==typeof e.TRC.pageManager.getUserId?e.TRC.pageManager.getUserId():null;return n||r},sendFinalReq:function e(t){var n="".concat(this.getHttpsPrefix(),"cds.taboola.com?uid=").concat(this.userId),r;null!==t[0]&&(n+="&uad=".concat(t[0])),this.prepareGenericRequest("GET",n).send()},sendSimpleReq:function e(){var t="".concat(this.getHttpsPrefix(),"cds.taboola.com?uid=").concat(this.userId),n;this.prepareGenericRequest("GET",t).send()},sendUadRequest:function t(){var r=this;return new Promise(function(t,s){if(r.safeGetTfaConfig("cds:send-uad-req",!0)||r.safeGetRboxConfig("cds:send-uad")){var i=r.prepareGenericRequest("GET",e.atob(n));i.onreadystatechange=function(){if(4===this.readyState)if(200===this.status){var e=i.responseText;e||__trcWarn("cds: error in pips - status ".concat(this.status,", return null")),t("NULL"!==e?e:null)}else __trcWarn("cds: error in pips - status ".concat(this.status,", return null")),t(null)},i.timeout=3e4,i.ontimeout=function(){__trcWarn("cds: error in pips - timeout"),t(null)},i.send()}else t(null)})},init:function t(){var n=this;e.TRC.cdsInitialized||(e.Promise?(this.userId=this.getUserId(),this.userId&&Promise.all([this.sendUadRequest()]).then(function(e){return n.sendFinalReq(e)},function(){return n.sendSimpleReq()}),e.TRC.cdsInitialized=!0):e.TRC.cdsInitialized=!0)}},e.TRC.cds.init()}catch(e){__trcError("Error running cds",e)}}(window);