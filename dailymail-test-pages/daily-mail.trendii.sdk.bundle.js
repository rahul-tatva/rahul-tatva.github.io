if(typeof trendii==="undefined"){trendii={}}else{if(typeof trendii!="object"){throw new Error("trendii already exists and is not an object.")}}trendii.i=".mol-img-group";trendii.t="figure";trendii.o="imageCaption";trendii.l="figcaption";trendii.u="trendiiSliderUniqueString";trendii.p=window.top;trendii.m=trendii.p.document;trendii.I=[];trendii.D;trendii.h=[];trendii._=0;trendii.A=null;trendii.g=null;trendii.k="https://rahul-tatva.github.io";trendii.init=function(){trendii.console.log("SDK init method called");trendii.T.P=2;trendii.L();trendii.M(`${trendii.T.V}/styles/daily-mail/trendii-sdk-daily-mail-slider.css`);trendii.M(`${trendii.T.V}/styles/daily-mail/trendii-sdk-daily-mail-all-product.css`);if(trendii.m.readyState==="complete"||trendii.m.readyState==="interactive"){trendii.console.log(trendii.m.readyState);trendii.S()}else{trendii.console.log("DOM in progress");trendii.m.addEventListener("DOMContentLoaded",()=>{trendii.console.log(trendii.m.readyState);trendii.S()})}};trendii.O="production";trendii.T={$:"",P:0,R:480,V:"https://cdn.trendii.com/native-ads-sdk",N:`https://beeswaxcreatives.trendii.com/img-creatives`,v:"trendii-sdk-ad-products-container",C:"retailer-logo",U:"trendii-native-ad-wrapper",H:"trendii-sdk-ad-products-container",j:"trendii-products-container-728X90"};trendii.T.W=`${trendii.T.V}/templates/products-slider-dynamic.html`;trendii.T.B=`${trendii.T.V}/templates/products-728X90-all-product-dynamic.html`;trendii.console=function(){return{log:function(){if(trendii.O==="test"){let i=Array.prototype.slice.call(arguments);i.unshift("[Trendii.SDK] ==>");console.log.apply(console,i)}},error:function(){let i=Array.prototype.slice.call(arguments);i.unshift("[Trendii.SDK] ==>");console.error.apply(console,i)}}}();trendii.G=function(i){return`${trendii.T.V}/images/retailers-logo/${i}`};trendii.K=function(i,t,e,n,r,d){const o=trendii.m.createElement(i);o.classList.add(t);if(e){o.innerHTML=e}if(n){o.style=n}if(r){o.href=r}if(d){o.target=d}return o};trendii.X=function(i){trendii.T.$=i};trendii.q=function(i){trendii.m.head.appendChild(trendii.m.createElement("script")).src=i};trendii.M=function(i){let t=trendii.m.createElement("link");t.type="text/css";t.rel="stylesheet";t.href=i;trendii.m.head.appendChild(t)};trendii.L=function(){if(trendii.O==="test"){trendii.q(`${trendii.T.V}/scripts/common/intersection-observer.js`);trendii.q(`${trendii.T.V}/scripts/common/splide.js`)}else{trendii.q(`${trendii.T.V}/scripts/common/intersection-observer.min.js`);trendii.q(`${trendii.T.V}/scripts/common/splide.min.js`)}trendii.M(`${trendii.T.V}/styles/common/splide-core.min.css`)};trendii.S=function(){try{Promise.all([fetch(trendii.T.W).then(i=>i.text()),fetch(trendii.T.B).then(i=>i.text())]).then(i=>{trendii.g=i[0];trendii.A=i[1];const t={rootMargin:"0px",threshold:.1};if(trendii.p.J){trendii.D=new trendii.p.J(trendii.F,t)}else{trendii.D=new IntersectionObserver(trendii.F,t)}let e;if(trendii.p.innerWidth<=trendii.T.R){e=Array.from(trendii.m.querySelectorAll(trendii.t))}else{e=Array.from(trendii.m.querySelectorAll(trendii.i))}e.forEach(i=>{trendii.D.observe(i)})})}catch(i){trendii.console.error(i)}};trendii.F=function(i,t){try{i.forEach(i=>{trendii.Y(i,t)})}catch(i){trendii.console.error(i)}};trendii.Y=function(i,t){try{if(i.isIntersecting){const I=i.target;t.unobserve(i.target);trendii.console.log("observer unregistered for ",I);const D=Array.from(I.getElementsByTagName("img"));const e=D.map(i=>{if(i.getAttribute("data-src"))return i.getAttribute("data-src");return i.getAttribute("src")}).filter(i=>i);const n="webpageUrl";const r="imageUrls";const d="publisherId";const o={Z:trendii.p.location.href,ii:e,P:trendii.T.P};const c=new Headers;c.append("Content-Type","application/json");const s=JSON.stringify(o);const a={method:"POST",headers:c,body:s};fetch(trendii.T.N,a).then(i=>i.json()).then(i=>{if(i!==""){if(i.ti&&i.ti===true){const c=i;let t=null,e=null,n=null,r,d,o;const s=D.length;for(let i=0;i<s;i++){r=D[i];d=r.src;o=r.getAttribute("data-src");n=c.ei.findIndex(i=>i.ni===d||o);t=c.ei[n];if(t.ri&&t.ri.length>0){e=r;break}}if(t.ri&&t.ri.length>0){trendii.di(t,trendii._);trendii._++;if(t.oi){if(trendii.p.innerWidth<=trendii.T.R){const u=I.getElementsByTagName(trendii.l)[0];if(u){u.after(t.oi)}else{I.appendChild(t.oi)}}else{I.getElementsByClassName(trendii.o)[0].after(t.oi);t.ci=true;trendii.console.log("ad rendered for ",I)}const a=t.si;const l=`#${a}`;if(t.ai){trendii.h.push(t.si);trendii.console.log(trendii.p.li);if(trendii.p.li){const p=new trendii.p.li(l,{type:"loop",ui:false,gap:10,pi:true,fi:true}).mount();const f=trendii.m.getElementById(a);f.style.display="block";const m=t.oi;m.setAttribute("data-slider-appended","true");m.style.display="block";trendii.console.log("slider appended");p.mi("mounted",function(){console.log("mounted")})}}}}}}else{trendii.console.log("empty feed response")}}).catch(i=>{trendii.console.error(i);typeof onErrorCallback==="function"&&onErrorCallback(error)})}}catch(i){trendii.console.error(i)}};trendii.di=function(i,t){i.oi=trendii.Ii(i,t)};trendii.Di=function(){try{trendii.I.ei.map((i,t)=>{if(i.ri&&i.ri.length>0){i.oi=trendii.Ii(i,t)}})}catch(i){trendii.console.error(i)}};trendii.Ii=function(e,t){try{const n=e.ni;const r=e.wi;let i=e.ri;if(trendii.p.innerWidth>trendii.T.R){i=e.ri.slice(0,4)}const d=e.wi;const o=`splide${t}`;e.si=o;switch(i.length){case 1:case 2:case 3:case 4:{e.ai=false;const c=new DOMParser;const s=c.parseFromString(trendii.A,"text/html");const a=trendii.G(`${d.toLowerCase()}.png`);const l=s.getElementById(trendii.T.C);l.title=d;l.src=a;const u=s.getElementById(trendii.T.j);u.innerHTML="";trendii.hi(i,u);const p=s.getElementById(trendii.T.U);return p}default:{e.ai=true;const f=trendii.g.replaceAll(trendii.u,o);const c=new DOMParser;const m=c.parseFromString(f,"text/html");const a=trendii.G(`${d.toLowerCase()}.png`);const l=m.getElementById(trendii.T.C);l.title=d;l.src=a;const I=m.getElementById(o);I.style.display="none";let t=m.getElementById(trendii.T.H);t.innerHTML="";i.forEach(i=>trendii.yi(i,t));const p=m.getElementById(trendii.T.U);p.style.display="none";return p}}}catch(i){trendii.console.error(i);return null}};trendii._i=function(){try{let i;if(trendii.p.innerWidth<=trendii.T.R){i=trendii.m.querySelectorAll(trendii.t)}else{i=trendii.m.querySelectorAll(trendii.i)}const t=Array.from(i);trendii.console.log(t);let a=null;let l=null;t.forEach((i,t)=>{trendii.console.log(i.getElementsByTagName("img"));const e=Array.from(i.getElementsByTagName("img"));let n,r,d;for(let i=0;i<e.length;i++){n=e[i];r=n.src;d=n.getAttribute("data-src");a=trendii.I.ei.find(i=>i.ni===r||d);if(a.oi){l=n;break}}if(a.oi){const o=trendii.m.createElement("div");o.classList.add("adContainer");o.style.background="yellow";o.style.maxHeight="300px";const c=trendii.m.createElement("div");c.classList.add("ads-inside-the-images");if(trendii.p.innerWidth<=trendii.T.R){const s=i.getElementsByTagName(trendii.l)[0];if(s){s.after(a.oi)}else{i.appendChild(a.oi)}}else{i.getElementsByClassName(trendii.o)[0].after(a.oi)}}})}catch(i){trendii.console.error(i)}};trendii.yi=function(i,t){try{const e=trendii.K("LI","splide__slide");t.appendChild(e);const n=trendii.K("A","product-redirection-link",null,"text-decoration: none;",i.url,"_blank");e.appendChild(n);const r=trendii.K("DIV","product-item-container");r.addEventListener("click",function(){adsWindow.open(i.url,"_blank")});n.appendChild(r);const d=trendii.K("DIV","product-item");d.style.backgroundImage=`url(${i.Ei})`;r.appendChild(d);if(i.bi){d.appendChild(trendii.K("SPAN","onsale","ON SALE"))}const o=trendii.K("DIV","product-details-wrapper");o.addEventListener("click",function(){adsWindow.open(i.url,"_blank")});d.appendChild(o);const c=trendii.K("DIV","product-details-wrapper-mobile");r.appendChild(c);o.appendChild(trendii.K("P","product-name",i.name));c.appendChild(trendii.K("P","product-name",i.name));o.appendChild(trendii.K("EM","product-price",i.currency+i.Ai));c.appendChild(trendii.K("EM","product-price",i.currency+i.Ai))}catch(i){console.gi(i)}};trendii.ki=function(i,t,e,n){try{const r=trendii.K("DIV",e);t.appendChild(r);const d=trendii.K("A","product-redirection-link",null,"text-decoration: none;",i.url,"_blank");r.appendChild(d);const o=trendii.K("DIV","product-item-container");o.addEventListener("click",function(){adsWindow.open(i.url,"_blank")});d.appendChild(o);const c=trendii.m.createElement("DIV");c.classList.add("product-item");o.appendChild(c);const s=trendii.K("DIV","product-item-image");s.style.backgroundImage=`url(${i.Ei})`;c.appendChild(s);if(i.bi){s.appendChild(trendii.K("SPAN","onsale","ON SALE"))}const a=trendii.K("DIV","product-details-wrapper");if(n>3){c.appendChild(a)}else{o.appendChild(a)}a.appendChild(trendii.K("P","product-name",i.name));a.appendChild(trendii.K("EM","product-price",i.currency+i.Ai));if(n>2){const l=trendii.K("DIV","product-details-wrapper-mobile");o.appendChild(l);l.appendChild(trendii.K("P","product-name",i.name));l.appendChild(trendii.K("EM","product-price",i.currency+i.Ai))}}catch(i){trendii.console.error(i)}};trendii.hi=function(t,i){switch(t.length){case 1:{const e=t[0];const n=trendii.K("DIV","one-product-wrapper");i.appendChild(n);const r=trendii.K("DIV","row");n.appendChild(r);trendii.ki(e,r,"col-12",t.length);break}case 2:{const d=trendii.m.createElement("DIV");d.classList.add("two-product-wrapper");i.appendChild(d);const r=trendii.m.createElement("DIV");r.classList.add("row");d.appendChild(r);for(let i=0;i<=1;i++){trendii.ki(t[i],r,"col-6",t.length)}break}case 3:{const o=trendii.m.createElement("DIV");o.classList.add("three-product-wrapper");i.appendChild(o);const r=trendii.m.createElement("DIV");r.classList.add("row");r.classList.add("row-cols-3");o.appendChild(r);for(let i=0;i<=2;i++){trendii.ki(t[i],r,"col",t.length)}break}case 4:{const c=trendii.m.createElement("DIV");c.classList.add("four-product-wrapper");i.appendChild(c);const r=trendii.m.createElement("DIV");r.classList.add("row");r.classList.add("row-cols-4");c.appendChild(r);for(let i=0;i<=3;i++){trendii.ki(t[i],r,"col",t.length)}break}default:{break}}};if(window.location.origin===trendii.k||trendii.O==="test"){trendii.init()}