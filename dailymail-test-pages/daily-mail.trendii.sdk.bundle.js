if(!trendii){trendii={}}else{if(typeof trendii!="object"){throw new Error("trendii already exists and is not an object.")}}trendii.i=".mol-img-group";trendii.t="figure";trendii.o="imageCaption";trendii.l="figcaption";trendii.p="trendiiSliderUniqueString";trendii.u=window.top;trendii.m=trendii.u.document;trendii.D=[];trendii.I;trendii.h=[];trendii._=0;trendii.M=null;trendii.O=null;trendii.init=function(){trendii.log("SDK init method called");trendii.k.g=2;trendii.A();trendii.P(`${trendii.k.L}/styles/daily-mail/trendii-sdk-daily-mail-slider.css`);trendii.P(`${trendii.k.L}/styles/daily-mail/trendii-sdk-daily-mail-all-product.css`);if(adsDOM.readyState==="complete"||adsDOM.readyState==="interactive"){trendii.log(adsDOM.readyState);trendii.T()}else{trendii.log("DOM in progress");adsDOM.addEventListener("DOMContentLoaded",()=>{trendii.log(adsDOM.readyState);trendii.T()})}};trendii.init();trendii.V="test";trendii.k={R:PUBLISHER_NAME,g:PUBLISHER_ID,S:480,$:"https://cdn.trendii.com/native-ads-sdk/test/",N:`https://beeswaxcreatives.trendii.com/img-creatives`,v:"trendii-sdk-ad-products-container",C:"retailer-logo",H:"trendii-native-ad-wrapper",U:"trendii-sdk-ad-products-container",j:"trendii-products-container-728X90"};trendii.k.W=`${trendii.k.L}/templates/products-slider-dynamic.html`;trendii.k.B=`${trendii.k.L}/templates/products-728X90-all-product-dynamic.html`;module.exports=trendii.k;trendii.log=function(){if(trendii.V==="test"){console.log("[Trendii.SDK]",message)}};trendii.G=function(i){console.error("[Trendii.SDK]",i.stack?i.stack:i.toString())};trendii.K=function(i){return`${trendii.k.$}/iamges/retailers-logo/${i}`};trendii.X=function(i,t,e,n,r,d){const o=trendii.m.createElement(i);o.classList.add(t);if(e){o.innerHTML=e}if(n){o.style=n}if(r){o.href=r}if(d){o.target=d}return o};trendii.q=function(i){trendii.k.R=i};trendii.J=function(i){trendii.m.head.appendChild(trendii.m.createElement("script")).src=i};trendii.P=function(i){let t=trendii.m.createElement("link");t.type="text/css";t.rel="stylesheet";t.href=i;trendii.m.head.appendChild(t)};trendii.A=function(){if(trendii.V==="test"){trendii.J(`${trendii.k.L}/scripts/common/intersection-observer.js`);trendii.J(`${trendii.k.L}/scripts/common/splide.js`)}else{trendii.J(`${trendii.k.L}/scripts/common/intersection-observer.min.js`);trendii.J(`${trendii.k.L}/scripts/common/splide.min.js`)}trendii.P(`${trendii.k.L}/styles/common/splide-core.min.css`)};trendii.T=function(){try{Promise.all([fetch(trendii.k.W).then(i=>i.text()),fetch(trendii.k.B).then(i=>i.text())]).then(i=>{trendii.O=i[0];trendii.M=i[1];const t={rootMargin:"0px",threshold:.1};if(trendii.u.F){trendii.I=new trendii.u.F(trendii.Y,t)}else{trendii.I=new IntersectionObserver(trendii.Y,t)}let e;if(trendii.u.innerWidth<=trendii.k.S){e=Array.from(trendii.m.querySelectorAll(trendii.t))}else{e=Array.from(trendii.m.querySelectorAll(trendii.i))}e.forEach(i=>{trendii.I.observe(i)})})}catch(i){trendii.G(i)}};trendii.Y=function(i,t){try{i.forEach(i=>{trendii.Z(i)})}catch(i){trendii.G(i)}};trendii.Z=function(i){try{if(i.isIntersecting){const D=i.target;observer.unobserve(i.target);trendii.log("observer unregistered for ",D);const I=Array.from(D.getElementsByTagName("img"));const t=I.map(i=>{if(i.getAttribute("data-src"))return i.getAttribute("data-src");return i.getAttribute("src")}).filter(i=>i);const e={ii:trendii.u.location.href,ti:t,ei:trendii.k.g};const n=new Headers;n.append("Content-Type","application/json");const r=JSON.stringify(e);const d={method:"POST",headers:n,body:r};fetch(trendii.k.N,d).then(i=>i.json()).then(i=>{if(i!==""){if(i.ni&&i.ni===true){const s=i;let t=null,e=null,n=null,r,d,o;const c=I.length;for(let i=0;i<c;i++){r=I[i];d=r.src;o=r.getAttribute("data-src");n=s.ri.findIndex(i=>i.di===d||o);t=s.ri[n];if(t.oi&&t.oi.length>0){e=r;break}}if(t.oi&&t.oi.length>0){trendii.si(t,trendii._);trendii._++;if(t.ci){if(trendii.u.innerWidth<=trendii.k.S){const p=D.getElementsByTagName(trendii.l)[0];if(p){p.after(t.ci)}else{D.appendChild(t.ci)}}else{D.getElementsByClassName(trendii.o)[0].after(t.ci);t.ai=true;trendii.log("ad rendered for ",D)}const a=t.li;const l=`#${a}`;if(t.pi){trendii.h.push(t.li);trendii.log(adsWindow.ui);if(trendii.u.ui){const u=new trendii.u.ui(l,{type:"loop",fi:false,gap:10,mi:true,Di:true}).mount();const f=trendii.m.getElementById(a);f.style.display="block";const m=t.ci;m.setAttribute("data-slider-appended","true");m.style.display="block";trendii.log("slider appended");u.Ii("mounted",function(){console.log("mounted")})}}}}}}else{this.log("empty feed response")}}).catch(i=>{trendii.G(i);typeof onErrorCallback==="function"&&onErrorCallback(error)})}}catch(i){trendii.G(i)}};trendii.si=function(i,t){i.ci=trendii.hi(i,t)};trendii.wi=function(){try{trendii.D.ri.map((i,t)=>{if(i.oi&&i.oi.length>0){i.ci=trendii.hi(i,t)}})}catch(i){trendii.G(i)}};trendii.hi=function(e,t){try{const n=e.di;const r=e.Ei;let i=e.oi;if(trendii.u.innerWidth>trendii.k.S){i=e.oi.slice(0,4)}const d=e.Ei;const o=`splide${t}`;e.li=o;switch(i.length){case 1:case 2:case 3:case 4:{e.pi=false;const s=new DOMParser;const c=s.parseFromString(trendii.M,"text/html");const a=getRetailerLogoPath(`${d.toLowerCase()}.png`);const l=c.getElementById(trendii.k.C);l.title=d;l.src=a;const p=c.getElementById(trendii.k.j);p.innerHTML="";trendii._i(i,p);const u=c.getElementById(this.H);return u}default:{e.pi=true;const f=this.O.replaceAll(trendii.p,o);const s=new DOMParser;const m=s.parseFromString(f,"text/html");const a=getRetailerLogoPath(`${d.toLowerCase()}.png`);const l=m.getElementById(RETAILER_LOGO_ID);l.title=d;l.src=a;const D=m.getElementById(o);D.style.display="none";let t=m.getElementById(this.U);t.innerHTML="";i.forEach(i=>trendii.Mi(i,t));const u=m.getElementById(trendii.k.H);u.style.display="none";return u}}}catch(i){trendii.G(i);return null}};trendii.Oi=function(){try{let i;if(trendii.u.innerWidth<=trendii.k.S){i=trendii.m.querySelectorAll(trendii.t)}else{i=trendii.m.querySelectorAll(trendii.i)}const t=Array.from(i);trendii.log(this.yi);let a=null;let l=null;this.yi.forEach((i,t)=>{trendii.log(i.getElementsByTagName("img"));const e=Array.from(i.getElementsByTagName("img"));let n,r,d;for(let i=0;i<e.length;i++){n=e[i];r=n.src;d=n.getAttribute("data-src");a=trendii.D.ri.find(i=>i.di===r||d);if(a.ci){l=n;break}}if(a.ci){const o=adsDOM.createElement("div");o.classList.add("adContainer");o.style.background="yellow";o.style.maxHeight="300px";const s=adsDOM.createElement("div");s.classList.add("ads-inside-the-images");if(trendii.u.innerWidth<=trendii.k.S){const c=i.getElementsByTagName(trendii.l)[0];if(c){c.after(a.ci)}else{i.appendChild(a.ci)}}else{i.getElementsByClassName(trendii.o)[0].after(a.ci)}}})}catch(i){trendii.G(i)}};trendii.Mi=function(i,t){try{const e=trendii.X("LI","splide__slide");t.appendChild(e);const n=trendii.X("A","product-redirection-link",null,"text-decoration: none;",i.url,"_blank");e.appendChild(n);const r=trendii.X("DIV","product-item-container");r.addEventListener("click",function(){adsWindow.open(i.url,"_blank")});n.appendChild(r);const d=trendii.X("DIV","product-item");d.style.backgroundImage=`url(${i.gi})`;r.appendChild(d);if(i.bi){d.appendChild(trendii.X("SPAN","onsale","ON SALE"))}const o=trendii.X("DIV","product-details-wrapper");o.addEventListener("click",function(){adsWindow.open(i.url,"_blank")});d.appendChild(o);const s=trendii.X("DIV","product-details-wrapper-mobile");r.appendChild(s);o.appendChild(trendii.X("P","product-name",i.name));s.appendChild(trendii.X("P","product-name",i.name));o.appendChild(trendii.X("EM","product-price",i.currency+i.ki));s.appendChild(trendii.X("EM","product-price",i.currency+i.ki))}catch(i){console.G(i)}};trendii.Ai=function(i,t,e,n){try{const r=trendii.X("DIV",e);t.appendChild(r);const d=trendii.X("A","product-redirection-link",null,"text-decoration: none;",i.url,"_blank");r.appendChild(d);const o=trendii.X("DIV","product-item-container");o.addEventListener("click",function(){adsWindow.open(i.url,"_blank")});d.appendChild(o);const s=adsDOM.createElement("DIV");s.classList.add("product-item");o.appendChild(s);const c=trendii.X("DIV","product-item-image");c.style.backgroundImage=`url(${i.gi})`;s.appendChild(c);if(i.bi){c.appendChild(trendii.X("SPAN","onsale","ON SALE"))}const a=trendii.X("DIV","product-details-wrapper");if(n>3){s.appendChild(a)}else{o.appendChild(a)}a.appendChild(trendii.X("P","product-name",i.name));a.appendChild(trendii.X("EM","product-price",i.currency+i.ki));if(n>2){const l=trendii.X("DIV","product-details-wrapper-mobile");o.appendChild(l);l.appendChild(trendii.X("P","product-name",i.name));l.appendChild(trendii.X("EM","product-price",i.currency+i.ki))}}catch(i){trendii.G(i)}};trendii._i=function(t,i){switch(t.length){case 1:{const e=t[0];const n=trendii.X("DIV","one-product-wrapper");i.appendChild(n);const r=trendii.X("DIV","row");n.appendChild(r);trendii.Ai(e,r,"col-12",t.length);break}case 2:{const d=adsDOM.createElement("DIV");d.classList.add("two-product-wrapper");i.appendChild(d);const r=adsDOM.createElement("DIV");r.classList.add("row");d.appendChild(r);for(let i=0;i<=1;i++){trendii.Ai(t[i],r,"col-6",t.length)}break}case 3:{const o=adsDOM.createElement("DIV");o.classList.add("three-product-wrapper");i.appendChild(o);const r=adsDOM.createElement("DIV");r.classList.add("row");r.classList.add("row-cols-3");o.appendChild(r);for(let i=0;i<=2;i++){trendii.Ai(t[i],r,"col",t.length)}break}case 4:{const s=adsDOM.createElement("DIV");s.classList.add("four-product-wrapper");i.appendChild(s);const r=adsDOM.createElement("DIV");r.classList.add("row");r.classList.add("row-cols-4");s.appendChild(r);for(let i=0;i<=3;i++){trendii.Ai(t[i],r,"col",t.length)}break}default:{break}}};