(()=>{"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function t(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i=function(e){return e.mediaData},s=function(e){return e.playerData},r=function(e){return e.monetization},o=function(e){return e.systemGeneral},a=function(e){return o(e).playerRemoved},c=function(){function i(t,s,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e(this,i),n(this,"store",void 0),n(this,"getDependenciesElements",void 0),n(this,"oldState",void 0),n(this,"unsubscribe",void 0),n(this,"onChange",void 0),n(this,"once",void 0),this.store=t,this.oldState=t.getState(),this.getDependenciesElements=s,this.unsubscribe=t.subscribe(this.onStateChanged.bind(this)),this.onChange=r,this.once=o}var s,r,o;return s=i,(r=[{key:"stopSubscription",value:function(){this.unsubscribe(),this.oldState=null,this.getDependenciesElements=null,this.store=null,this.unsubscribe=null,this.onChange=null}},{key:"onStateChanged",value:function(){var e=this.store.getState();if(a(e)&&a(this.oldState))this.stopSubscription();else{var n=this.getDependenciesElements(this.oldState),t=this.getDependenciesElements(e);n.every((function(e,n){return e===t[n]}))||(this.onChange(e),this.once&&this.stopSubscription()),this.oldState=e}}}])&&t(s.prototype,r),o&&t(s,o),i}(),d=r,u=function(e){return d(e).adsData},l=function(e){return u(e).adStatus},h=function(e){return u(e).adDuration},p=function(e){return u(e).adUnit},f=s,b=function(e){return f(e).videoTagStatus},g=function(e){return f(e).currentVideoDuration},m=function(){for(var e=0,n=0,t=arguments.length;n<t;n++)e+=arguments[n].length;var i=Array(e),s=0;for(n=0;n<t;n++)for(var r=arguments[n],o=0,a=r.length;o<a;o++,s++)i[s]=r[o];return i},v=function(e,n,t){this.name=e,this.version=n,this.os=t,this.type="browser"},y=function(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},w=function(e,n,t,i){this.name=e,this.version=n,this.os=t,this.bot=i,this.type="bot-device"},S=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},A=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},O=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,P=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],_=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function C(e){return""!==e&&P.reduce((function(n,t){var i=t[0],s=t[1];if(n)return n;var r=s.exec(e);return!!r&&[i,r]}),!1)}function T(e){var n=C(e);if(!n)return null;var t=n[0],i=n[1];if("searchbot"===t)return new S;var s=i[1]&&i[1].split(/[._]/).slice(0,3);s?s.length<3&&(s=m(s,function(e){for(var n=[],t=0;t<e;t++)n.push("0");return n}(3-s.length))):s=[];var r=s.join("."),o=function(e){for(var n=0,t=_.length;n<t;n++){var i=_[n],s=i[0];if(i[1].exec(e))return s}return null}(e),a=O.exec(e);return a&&a[1]?new w(t,r,o,a[1]):new v(t,r,o)}D?T(D):"undefined"===typeof document&&"undefined"!==typeof navigator&&"ReactNative"===navigator.product?new A:"undefined"!==typeof navigator?T(navigator.userAgent):"undefined"!==typeof process&&process.version&&new y(process.version.slice(1));var D,E=function(e){return"undefined"===typeof e},k=function(e){return E(e)||null===e||0===e.length},W=function(e){return Math.floor(1e3*e)};function B(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function M(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?B(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):B(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var V={"90min":"Sports","12up":"Sports",dbltap:"Sports",floor8:"Entertainment","the big lead":"Sports","the duel":"Sports","mental floss":"Entertainment",fansided:"Sports",theplayerstribune:"Sports"},j=function(e){return V[e]||"*null"},R=function(e){return e.includes("Golf")?"Golf Channel":e.includes("Bay Area")?"bayarea":e.includes("Boston")?"newengland":e.includes("Chicago")?"chicago":e.includes("Northwest")?"northwest":e.includes("Philadelphia")?"philly":e.includes("Washington")?"washingtondc":""},L=function(e){return e&&e.toLowerCase().includes("nbc")},x=function(e,n,t,i){var s={ns_st_ci:n,ns_st_cl:W(t),ns_st_pu:"*null",ns_st_pr:"*null",ns_st_ep:"*null",ns_st_sn:"*null",ns_st_en:"*null",ns_st_ge:"".concat(j(e)),ns_st_ia:"0",ns_st_ddt:"*null",ns_st_tdt:"*null",ns_st_st:"*null",c3:L(i)?"Minute Media":e,c4:"*null",c6:"*null",ns_st_ce:"1",ns_st_ti:"*null"},r=function(e){return L(e)?{ca1:"23",ca2:"6035083",ca3:R(e)}:{}}(i);return M(M({},s),r)},I=i,N=function(e){return I(e).videoData},$=N,q=function(e){return $(e).creator},z=function(e){return $(e).mediaId},G=function t(i,s,r){var o=this;e(this,t),n(this,"streamingAnalytics",null),n(this,"videoTagStatusSubscriber",void 0),n(this,"adStatusSubscriber",void 0),n(this,"videoDataSubscriber",void 0),n(this,"publisherContribution",void 0),n(this,"comscorePublisherId",void 0),n(this,"pendingEvents",void 0),n(this,"isComscoreAvailable",(function(){return window.ns_&&window.ns_.ReducedRequirementsStreamingAnalytics})),n(this,"initiateStreamingAnalytics",(function(){o.isComscoreAvailable()?o.initiateStreamingAnalyticsObject():window.addEventListener("MPlayerComscoreLoaded",(function(){o.initiateStreamingAnalyticsObject(),k(o.pendingEvents)||o.executePendingEvents()}))})),n(this,"initiateStreamingAnalyticsObject",(function(){o.streamingAnalytics=new window.ns_.ReducedRequirementsStreamingAnalytics({publisherId:o.comscorePublisherId})})),n(this,"isStreamingAnalyticsInitialized",(function(){return null!==o.streamingAnalytics})),n(this,"addBlurListenerOnMobile",(function(){null!==navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)/i)&&window.addEventListener("blur",(function(){return o.endOfPlayback()}))})),n(this,"onVideoDataChanged",(function(){o.initiateStreamingAnalyticsIfPossible()})),n(this,"onVideoTagStatusChanged",(function(e){switch(b(e)){case"paused":o.endOfPlayback();break;case"playing":o.startOfVideoPlayback(e)}})),n(this,"initiateStreamingAnalyticsIfPossible",(function(){o.isComscoreAvailable()&&o.initiateStreamingAnalyticsObject()})),n(this,"getContentTypeByDuration",(function(e){return e>60?window.ns_.ReducedRequirementsStreamingAnalytics.ContentType.LongFormOnDemand:window.ns_.ReducedRequirementsStreamingAnalytics.ContentType.ShortFormOnDemandon})),n(this,"getAdMediaType",(function(e){return"preroll"===e?window.ns_.ReducedRequirementsStreamingAnalytics.AdType.LinearOnDemandPreRoll:window.ns_.ReducedRequirementsStreamingAnalytics.AdType.LinearOnDemandMidRoll})),n(this,"executePendingEvents",(function(){for(;!k(o.pendingEvents);){var e=o.pendingEvents.pop(),n=e.action,t=e.metadataLabelObject,i=e.mediaTypeParams;switch(n){case"playVideoContentPart":o.streamingAnalytics.playVideoContentPart(t,o.getContentTypeByDuration(i));break;case"playVideoAdvertisement":o.streamingAnalytics.playVideoAdvertisement(t,o.getAdMediaType(i));break;case"stop":o.streamingAnalytics.stop()}}})),n(this,"addToPendingEvents",(function(e,n,t){o.pendingEvents.unshift({action:e,metadataLabelObject:n,mediaTypeParams:t})})),n(this,"startOfVideoPlayback",(function(e){var n=g(e),t=z(e),i=q(e),s=x(o.publisherContribution,t,n,i);o.isStreamingAnalyticsInitialized()?o.streamingAnalytics.playVideoContentPart(s,o.getContentTypeByDuration(n)):o.addToPendingEvents("playVideoContentPart",s,n)})),n(this,"endOfPlayback",(function(){o.isStreamingAnalyticsInitialized()?o.streamingAnalytics.stop():o.addToPendingEvents("stop")})),n(this,"onAdStatusChanged",(function(e){switch(l(e)){case"playing":o.startOfAdPlayback(e);break;case"completed":case"skipped":o.endOfPlayback()}})),n(this,"startOfAdPlayback",(function(e){var n=h(e),t={ns_st_cl:W(n)},i=p(e);o.isStreamingAnalyticsInitialized()?o.streamingAnalytics.playVideoAdvertisement(t,o.getAdMediaType(i)):o.addToPendingEvents("playVideoAdvertisement",t,i)}));var a=r.publisher_contribution,d=r.comscore_publisher_id;this.comscorePublisherId=d,this.publisherContribution=a,this.videoTagStatusSubscriber=new c(i,t.getVideoTagStatusDependencies,this.onVideoTagStatusChanged.bind(this)),this.adStatusSubscriber=new c(i,t.getAdStatusDependencies,this.onAdStatusChanged.bind(this)),this.videoDataSubscriber=new c(i,t.getVideoDataDependencies,this.onVideoDataChanged.bind(this)),this.pendingEvents=new Array,this.addBlurListenerOnMobile(),this.initiateStreamingAnalytics()};n(G,"getVideoTagStatusDependencies",(function(e){return[b(e)]})),n(G,"getAdStatusDependencies",(function(e){return[l(e)]})),n(G,"getVideoDataDependencies",(function(e){return[N(e)]}));var K="https://bucket1.mm-syringe.com/lib/comScore-JS-6.2.3.180328.min.js",F=function(){var e=new Event("MPlayerComscoreLoaded");window.dispatchEvent(e)},X=function(){document.querySelectorAll('script[src="'.concat(K,'"]')).length>0||function(){var e=document.createElement("script");e.setAttribute("src",K),e.setAttribute("type","text/javascript"),e.addEventListener("load",F),document.head.appendChild(e)}()};window.monti.dataset.plugins.comscorePlugin=function(e,n,t){X();var i=window.monti.dataset.store[e];return new G(i,e,t)}})();
//# sourceMappingURL=mplayer_comscore_plugin.4.2.4.js.map